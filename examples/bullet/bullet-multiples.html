<!DOCTYPE html>
<html>
  <head>
    <title>Bullet Chart (Multiples)</title>
    <script type="text/javascript" src="../../d3.js"></script>
    <script type="text/javascript" src="../../d3.chart.js"></script>
    <script type="text/javascript" src="bullets.js"></script>
    <link type="text/css" rel="stylesheet" href="bullet.css"/>
  </head>
  <body>
    <script type="text/javascript">

var bullet = d3.chart.bullet()
    .orient("left")
    .duration(1000);

var vis = d3.select("body").append("svg:svg")
    .attr("width", 900)
    .attr("height", 300)
  .append("svg:g")
    .attr("transform", "translate(10,0)");

vis.selectAll("g.bullet")
    .data(bullets)
  .enter().append("svg:g")
    .attr("class", "bullet")
    .attr("transform", function(d, i) { return "translate(0," + (i * 60) + ")"; })
    .call(bullet);

function randomize() {
  for (var i = 0, ii = bullets.length; i < ii; i++) {
    var b = bullets[i];
    b.ranges = b.ranges.map(function(d) { return Math.random() * 1000; });
    b.markers = b.markers.map(function(d) { return Math.random() * 1000; });
    b.measures = b.measures.map(function(d) { return Math.random() * 1000; });
  }
  vis.selectAll("g.bullet").call(bullet);
}

    </script>
    <input type="button" value="Randomize!" onclick="randomize()">
  </body>
</html>
